generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearchPostgres"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int         @id @default(autoincrement())
  email        String      @unique
  firstName    String      @map("first_name")
  lastName     String      @map("last_name")
  patronymic   String?
  dateOfBirth  DateTime    @map("date_of_birth") @db.Date
  role         Role        @default(TEACHER)
  discipline   Discipline? @relation(fields: [disciplineId], references: [id], onDelete: SetNull)
  disciplineId Int?        @map("discipline_id")
  avatar       String?
  password     String?
  createdAt    DateTime    @default(now()) @map("created_at") @db.Timestamp
  updatedAt    DateTime    @updatedAt @map("updated_at") @db.Timestamp

  @@map("users")
}

model Discipline {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp
  users     User[]

  @@map("disciplines")
}

enum Role {
  TEACHER
  VICE_PRINCIPAL
}
